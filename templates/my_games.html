{% extends "base.html" %}

{% block title %}My Games List - My Awesome Game Site{% endblock %}

{% block content %}
<h2>My Games List</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul class="flashes">
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

{% if user_games %}
    <div class="games-list">
        {% for game in user_games %}
            <div class="game-box" style="border:1px solid #ccc; margin-bottom:10px; padding:10px; display: flex; align-items: center;">
                <div class="game-image" style="margin-right: 20px;">
                    <a href="{{ url_for('game_detail', game_id=game['game_id']) }}">
                        <img src="{{ game['cover_image'] }}" alt="{{ game['title'] }} Cover" style="width:150px;">
                    </a>
                </div>
                <div class="game-info" style="flex: 1;">
                    <a href="{{ url_for('game_detail', game_id=game['game_id']) }}" style="font-weight:bold; font-size:1.2em; display:block;">
                        {{ game['title'] }}
                    </a>
                    <p>Developer: {{ game['developer'] }}</p>
                    <p>Publisher: {{ game['publisher'] }}</p>
                    <p>Score: {{ game['metacritic_score'] }}</p>
                    <p>Age Rating: {{ game['age_rating'] }}</p>
                    <p>
                        <strong>Platforms:</strong>
                        {% if game['platform_name1'] %}{{ game['platform_name1'] }}{% endif %}
                        {% if game['platform_name2'] %} / {{ game['platform_name2'] }}{% endif %}
                        {% if game['platform_name3'] %} / {{ game['platform_name3'] }}{% endif %}
                        {% if game['platform_name4'] %} / {{ game['platform_name4'] }}{% endif %}
                        {% if game['platform_name5'] %} / {{ game['platform_name5'] }}{% endif %}
                        {% if game['platform_name6'] %} / {{ game['platform_name6'] }}{% endif %}
                        {% if game['platform_name7'] %} / {{ game['platform_name7'] }}{% endif %}
                        {% if game['platform_name8'] %} / {{ game['platform_name8'] }}{% endif %}
                    </p>
                    <p><strong>Price:</strong> {{ game['price'] }} {{ game['currency'] }}</p>
                    <form action="{{ url_for('remove_from_list', game_id=game['game_id']) }}" method="post" style="display:inline;">
                        <button type="submit" style="background-color:#ff4d4d; color:white; border:none; padding:5px 10px; cursor:pointer;">Remove from My List</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>You haven't added any games to your list yet.</p>
    <p><a href="{{ url_for('home') }}">Browse games</a> to start adding them!</p>
{% endif %}

<p><a href="{{ url_for('home') }}">Back to Home</a></p>
{% endblock %}